{% extends "prices/base.html" %}
{% block title %}Precio BTC{% endblock %}

{% block content %}
<div class="card">
  <div class="card-header">üí∞ Precio actual de Bitcoin (CoinGecko)</div>
  <div class="card-body">
    {% if error %}
      <div class="alert alert-danger">Error: {{ error }}</div>
    {% else %}
      {% if data %}
        <ul class="mb-0">
          <li><strong>USD:</strong> {{ data.usd }}</li>
          <li><strong>EUR:</strong> {{ data.eur }}</li>
          <li><strong>GBP:</strong> {{ data.gbp }}</li>
        </ul>
      {% else %}
        <p class="text-muted mb-0">Sin datos.</p>
      {% endif %}
    {% endif %}
  </div>
</div>

{% if prices %}
  <div class="card mt-3">
    <div class="card-body">
      <h4>Precio actual de Bitcoin</h4>
      <p>USD: {{ prices.usd }} | EUR: {{ prices.eur }} | GBP: {{ prices.gbp }}</p>
      {% if cached %}
        <small>Mostrando √∫ltimo dato en cach√© (la API est√° ocupada). Se actualiza cada {{ ttl_seconds }} s.</small>
      {% endif %}
    </div>
  </div>
{% else %}
  <div class="alert alert-warning mt-3">
    No se pudo obtener el precio en este momento (l√≠mite de consultas). Intenta m√°s tarde.
    {% if api_error %}<br><small>{{ api_error }}</small>{% endif %}
  </div>
{% endif %}

<div class="mt-4">
  <p>
    <a href="{% url 'prices:watch_list' %}" class="btn btn-primary">Ir a Watch List</a>
  </p>
</div>
{% endblock %}
